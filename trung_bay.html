<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mine - Chi ti·∫øt s·∫£n ph·∫©m</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.0/flowbite.min.css" rel="stylesheet" />
    <link rel="icon" href="Picture/logo.png" type="image/png">
    <style>
        /* Enhanced Rating Face Animations */
        .rating-face {
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            transform-origin: center;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            cursor: pointer;
            position: relative;
            /* Removed border-radius to prevent emoji clipping */
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.02));
            /* Removed backdrop-filter to prevent emoji distortion */
            border: 2px solid transparent;
            background-clip: padding-box;
            /* Add subtle rounded background behind emoji */
        }

        /* Add circular background effect without clipping emoji */
        .rating-face::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 90%;
            height: 90%;
            border-radius: 50%;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            transform: translate(-50%, -50%);
            z-index: -1;
            transition: all 0.4s ease;
        }

        /* Floating Animation for Idle State */
        .rating-face {
            animation: gentleFloat 3s ease-in-out infinite;
        }

        @keyframes gentleFloat {

            0%,
            100% {
                transform: translateY(0px) rotate(0deg);
            }

            25% {
                transform: translateY(-2px) rotate(1deg);
            }

            50% {
                transform: translateY(-1px) rotate(0deg);
            }

            75% {
                transform: translateY(-2px) rotate(-1deg);
            }
        }

        /* Hover Effects */
        .rating-option:hover .rating-face {
            transform: scale(1.25) translateY(-3px);
            filter: drop-shadow(0 8px 16px rgba(0, 0, 0, 0.3)) drop-shadow(0 0 20px rgba(255, 255, 255, 0.2));
            animation: hoverPulse 0.6s ease-in-out infinite alternate;
        }

        /* Enhanced background glow on hover */
        .rating-option:hover .rating-face::before {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.3), rgba(255, 255, 255, 0.1));
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.3);
        }

        @keyframes hoverPulse {
            0% {
                box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.3);
                filter: brightness(1);
            }

            100% {
                box-shadow: 0 0 0 10px rgba(255, 255, 255, 0);
                filter: brightness(1.2);
            }
        }

        /* Selected State with Enhanced Animation */
        .rating-option.selected .rating-face {
            transform: scale(1.3) translateY(-5px);
            animation: selectedBounce 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55),
                selectedGlow 2s ease-in-out infinite alternate;
        }

        /* Enhanced selected background */
        .rating-option.selected .rating-face::before {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.4), rgba(255, 215, 0, 0.2));
            box-shadow: 0 0 25px rgba(255, 215, 0, 0.5);
        }

        @keyframes selectedBounce {
            0% {
                transform: scale(1) translateY(0px);
            }

            20% {
                transform: scale(1.1) translateY(-2px);
            }

            40% {
                transform: scale(1.4) translateY(-8px);
            }

            60% {
                transform: scale(1.2) translateY(-4px);
            }

            80% {
                transform: scale(1.35) translateY(-6px);
            }

            100% {
                transform: scale(1.3) translateY(-5px);
            }
        }

        @keyframes selectedGlow {
            0% {
                filter: brightness(1.1) saturate(1.2);
                box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
            }

            100% {
                filter: brightness(1.3) saturate(1.5);
                box-shadow: 0 0 30px rgba(255, 255, 255, 0.5);
            }
        }

        /* Ripple Effect */
        .rating-option {
            position: relative;
            /* Removed overflow: hidden to prevent emoji clipping */
            /* Removed border-radius to prevent emoji clipping */
        }

        .rating-option::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.4) 0%, transparent 70%);
            transform: translate(-50%, -50%);
            transition: width 0.6s ease-out, height 0.6s ease-out, opacity 0.6s ease-out;
            opacity: 0;
            pointer-events: none;
            z-index: 0;
            /* Behind the emoji */
        }

        .rating-option.clicked::before {
            width: 100px;
            height: 100px;
            opacity: 1;
            animation: rippleEffect 0.6s ease-out;
        }

        @keyframes rippleEffect {
            0% {
                width: 0;
                height: 0;
                opacity: 0.8;
            }

            50% {
                opacity: 0.4;
            }

            100% {
                width: 100px;
                height: 100px;
                opacity: 0;
            }
        }

        /* Particle Effects */
        .rating-option.selected::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 120%;
            height: 120%;
            pointer-events: none;
            background: radial-gradient(circle at center,
                    transparent 30%,
                    rgba(255, 215, 0, 0.2) 40%,
                    transparent 60%);
            animation: particleSparkle 1s ease-out;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            z-index: -1;
            /* Behind the emoji */
        }

        @keyframes particleSparkle {
            0% {
                transform: scale(0) rotate(0deg);
                opacity: 0;
            }

            50% {
                transform: scale(1.2) rotate(180deg);
                opacity: 1;
            }

            100% {
                transform: scale(1.5) rotate(360deg);
                opacity: 0;
            }
        }

        /* Enhanced Feedback Animation */
        #rating-feedback {
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            transform: translateY(20px);
            opacity: 0;
        }

        #rating-feedback.show {
            transform: translateY(0);
            opacity: 1;
            animation: feedbackSuccess 0.8s ease-out;
        }

        @keyframes feedbackSuccess {
            0% {
                transform: translateY(20px) scale(0.8);
                opacity: 0;
            }

            50% {
                transform: translateY(-5px) scale(1.05);
                opacity: 0.8;
            }

            100% {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
        }

        /* Rating Container Animation */
        .rating-container {
            animation: fadeInUp 0.6s ease-out;
        }

        @keyframes fadeInUp {
            0% {
                opacity: 0;
                transform: translateY(30px);
            }

            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Individual Rating Delays for Staggered Animation */
        .rating-option:nth-child(1) {
            animation-delay: 0.1s;
        }

        .rating-option:nth-child(2) {
            animation-delay: 0.2s;
        }

        .rating-option:nth-child(3) {
            animation-delay: 0.3s;
        }

        .rating-option:nth-child(4) {
            animation-delay: 0.4s;
        }

        .rating-option:nth-child(5) {
            animation-delay: 0.5s;
        }

        /* Seller Rating Face Animation */
        #seller-rating-face {
            transition: all 0.3s ease;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                transform: scale(1);
                opacity: 1;
            }

            50% {
                transform: scale(1.05);
                opacity: 0.8;
            }
        }

        /* Additional Professional Animations */
        @keyframes deselectBounce {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(0.9);
            }

            100% {
                transform: scale(1);
            }
        }

        @keyframes subtleShake {

            0%,
            100% {
                transform: translateX(0);
            }

            25% {
                transform: translateX(-2px);
            }

            75% {
                transform: translateX(2px);
            }
        }

        @keyframes floatParticle {
            0% {
                transform: translateY(0px) scale(1);
                opacity: 0;
            }

            20% {
                opacity: 1;
            }

            100% {
                transform: translateY(-20px) scale(0);
                opacity: 0;
            }
        }

        @keyframes successFlash {
            0% {
                opacity: 0;
                transform: scale(0.8);
            }

            50% {
                opacity: 1;
                transform: scale(1);
            }

            100% {
                opacity: 0;
                transform: scale(1.2);
            }
        }

        /* Enhanced Mobile Touch Effects */
        .rating-option.touch-active .rating-face {
            transform: scale(1.1);
            filter: brightness(1.2);
        }

        /* Improved Accessibility */
        @media (prefers-reduced-motion: reduce) {

            .rating-face,
            .rating-option,
            #rating-feedback {
                animation: none !important;
                transition: none !important;
            }
        }

        /* Dark mode support for animations */
        @media (prefers-color-scheme: dark) {
            .rating-option::before {
                background: radial-gradient(circle, rgba(255, 255, 255, 0.2) 0%, transparent 70%);
            }

            .rating-face::before {
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.02));
            }
        }

        /* Enhanced Performance with GPU Acceleration */
        .rating-face,
        .rating-option,
        .rating-option::before,
        .rating-option::after {
            will-change: transform, opacity, filter;
            transform: translateZ(0);
            backface-visibility: hidden;
        }

        /* Feedback animation */
        .rating-feedback-show {
            animation: fadeInUp 0.5s ease-out;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>

<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-gray-800 border-gray-700 dark:bg-gray-900 fixed w-full z-50 shadow-sm">
        <div class="max-w-screen-xl flex items-center mx-auto p-3">
            <a href="index.html" class="flex items-center space-x-2 flex-shrink-0">
                <img src="Picture/logo.png" class="h-10" alt="Mine Logo">
                <span class="self-center text-xl font-bold text-white">Mine</span>
            </a>
            <div class="hidden lg:flex items-center space-x-6 ml-8">
                <a href="index.html" class="text-white hover:text-green-400 transition-colors">Trang ch·ªß</a>
                <a href="mua_fixed.html" class="text-green-400 font-medium hover:text-green-300 transition-colors">Mua
                    s·∫Øm</a>
                <a href="service.html" class="text-white hover:text-green-400 transition-colors">D·ªãch v·ª•</a>
                <a href="timhieuthem.html" class="text-white hover:text-green-400 transition-colors">V·ªÅ ch√∫ng t√¥i</a>
                <a href="contact.html" class="text-white hover:text-green-400 transition-colors">Li√™n h·ªá</a>
            </div>
            <div class="flex-1"></div>
            <div class="flex items-center space-x-3 flex-shrink-0">
                <a href="cart.html" class="relative p-2 text-white hover:text-green-400 transition-colors"
                    title="Gi·ªè h√†ng">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M16 11V7a4 4 0 00-8 0v4M5 9h14l-1 7H6L5 9z" />
                    </svg>
                    <span id="cart-count"
                        class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center hidden">0</span>
                </a>
                <a href="dang_ban.html"
                    class="px-4 py-2 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded-lg transition-colors">ƒêƒÉng
                    b√°n</a>
                <button data-collapse-toggle="navbar-default" type="button"
                    class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200"
                    aria-controls="navbar-default" aria-expanded="false">
                    <span class="sr-only">Open main menu</span>
                    <svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
                        viewBox="0 0 17 14">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M1 1h15M1 7h15M1 13h15" />
                    </svg>
                </button>
                <div class="hidden w-full md:block md:w-auto" id="navbar-default">
                    <ul
                        class="font-medium flex flex-col p-4 md:p-0 mt-4 border border-gray-100 rounded-lg bg-gray-50 md:flex-row md:space-x-8 rtl:space-x-reverse md:mt-0 md:border-0 md:bg-white dark:bg-gray-800 md:dark:bg-gray-900 dark:border-gray-700">
                        <li class="relative flex items-center space-x-2">
                            <div class="relative h-8 w-8 flex items-center justify-center">
                                <svg class="h-8 w-8 text-green-600" fill="currentColor" viewBox="0 0 24 24">
                                    <path
                                        d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5.94 7.94l-4.47 4.47-2.4-2.4-1.42 1.42 3.82 3.82 5.89-5.89-1.42-1.42z" />
                                    <path d="M12 7v3M9 10h6M12 13v3" class="text-white" />
                                </svg>
                            </div>
                            <button id="dropdown-toggle" class="text-gray-500 hover:text-gray-700 ml-1"
                                title="Toggle dropdown">
                                <svg id="arrow-icon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5"
                                    viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd"
                                        d="M5.293 9.293a1 1 0 011.414 0L10 12.586l3.293-3.293a1 1 0 011.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                                        clip-rule="evenodd" />
                                </svg>
                            </button>
                            <div id="dropdown-content"
                                class="hidden absolute top-full mt-2 w-60 bg-white border border-gray-300 rounded-lg shadow-lg end-0">
                                <div class="p-4">
                                    <div class="flex items-start mb-4">
                                        <!-- Avatar container with pencil icon -->
                                        <div id="avatar-container" class="relative flex-shrink-0 mr-3">
                                            <svg class="h-12 w-12 text-green-600" fill="currentColor"
                                                viewBox="0 0 24 24">
                                                <path
                                                    d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5.94 7.94l-4.47 4.47-2.4-2.4-1.42 1.42 3.82 3.82 5.89-5.89-1.42-1.42z" />
                                                <path d="M12 7v3M9 10h6M12 13v3" class="text-white" />
                                            </svg>
                                            <!-- Icon c√¢y vi·∫øt ch√¨ b√™n c·∫°nh avatar -->
                                            <button id="pencil-edit-button"
                                                class="absolute -bottom-1 -right-1 bg-white rounded-full p-0.5 shadow-md hover:bg-gray-50 transition-colors z-10"
                                                title="ƒê·ªïi avatar">
                                                <svg class="h-3 w-3 text-gray-600" fill="none" stroke="currentColor"
                                                    viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                                    <path stroke-linecap="round" stroke-linejoin="round"
                                                        stroke-width="2"
                                                        d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z">
                                                    </path>
                                                </svg>
                                            </button>
                                        </div>
                                        <!-- User info -->
                                        <div class="flex-1 min-w-0">
                                            <p
                                                class="text-sm font-medium whitespace-nowrap overflow-hidden text-ellipsis">
                                                Tr·∫ßn H·ªØu H·∫£i ƒêƒÉng</p>
                                            <p
                                                class="text-xs text-gray-500 whitespace-nowrap overflow-hidden text-ellipsis">
                                                TK ƒê·ªãnh danh: C0888293...</p>
                                        </div>
                                    </div>
                                    <input type="file" id="avatar-input" accept="image/*,video/*" class="hidden"
                                        title="Ch·ªçn avatar m·ªõi" placeholder="Ch·ªçn file avatar">
                                    <ul class="mt-2 space-y-1">
                                        <li><a href="public-maps.html"
                                                class="block text-sm text-gray-700 hover:underline">B·∫£n ƒë·ªì c√¥ng khai</a>
                                        </li>
                                        <li><a href="blog.html"
                                                class="block text-sm text-gray-700 hover:underline">Blog</a>
                                        </li>
                                        <li><a href="event.html" class="block text-sm text-gray-700 hover:underline">S·ª±
                                                ki·ªán</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="pt-20 pb-8">
        <!-- Breadcrumb -->
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mb-6">
            <nav class="flex" aria-label="Breadcrumb">
                <ol class="inline-flex items-center space-x-1 md:space-x-3">
                    <li class="inline-flex items-center">
                        <a href="index.html"
                            class="inline-flex items-center text-sm font-medium text-gray-700 hover:text-green-600">
                            <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                <path
                                    d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z">
                                </path>
                            </svg>
                            Trang ch·ªß
                        </a>
                    </li>
                    <li>
                        <div class="flex items-center">
                            <svg class="w-6 h-6 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd"
                                    d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
                                    clip-rule="evenodd"></path>
                            </svg>
                            <a href="mua_fixed.html"
                                class="ml-1 text-sm font-medium text-gray-700 hover:text-green-600 md:ml-2">Mua s·∫Øm</a>
                        </div>
                    </li>
                    <li aria-current="page">
                        <div class="flex items-center">
                            <svg class="w-6 h-6 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd"
                                    d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
                                    clip-rule="evenodd"></path>
                            </svg>
                            <span class="ml-1 text-sm font-medium text-gray-500 md:ml-2" id="product-title">Chi ti·∫øt s·∫£n
                                ph·∫©m</span>
                        </div>
                    </li>
                </ol>
            </nav>
        </div>

        <!-- Product Detail Container -->
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <!-- Loading State -->
            <div id="loading-state" class="flex justify-center items-center py-20">
                <div class="animate-spin rounded-full h-32 w-32 border-b-2 border-green-600"></div>
            </div>

            <!-- Error State -->
            <div id="error-state" class="hidden text-center py-20">
                <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.34 0-4.47-.881-6.08-2.33" />
                </svg>
                <h3 class="mt-2 text-sm font-medium text-gray-900">Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m</h3>
                <p class="mt-1 text-sm text-gray-500">S·∫£n ph·∫©m b·∫°n ƒëang t√¨m ki·∫øm kh√¥ng t·ªìn t·∫°i ho·∫∑c ƒë√£ b·ªã x√≥a.</p>
                <div class="mt-6">
                    <a href="mua_fixed.html"
                        class="inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700">
                        Quay l·∫°i trang mua s·∫Øm
                    </a>
                </div>
            </div>

            <!-- Product Content -->
            <div id="product-content" class="hidden">
                <!-- Product Main Section -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12">
                    <!-- Product Images -->
                    <div class="space-y-4">
                        <div class="aspect-w-1 aspect-h-1 w-full overflow-hidden rounded-lg bg-gray-200">
                            <img id="main-product-image" class="h-full w-full object-cover object-center" src="" alt="">
                        </div>
                        <div id="product-gallery" class="grid grid-cols-4 gap-2">
                            <!-- Additional images will be loaded here -->
                        </div>

                        <!-- Product Rating - Moved from right column -->
                        <div class="border-t border-gray-200 pt-6">
                            <h3 class="text-lg font-medium text-gray-900 mb-4">Tin ƒëƒÉng n√†y r√µ r√†ng v√†
                                ƒë√°ng tin c·∫≠y ƒë·ªÉ mua h√†ng kh√¥ng?</h3>
                            <div class="flex justify-center space-x-6 mb-4">
                                <!-- Rating 1: Very Sad -->
                                <div class="rating-option cursor-pointer text-center" data-rating="1">
                                    <div
                                        class="w-12 h-12 flex items-center justify-center text-4xl text-gray-400 hover:text-red-500 transition-colors rating-face">
                                        üò≠
                                    </div>
                                    <p class="text-xs mt-1 text-gray-500">R·∫•t t·ªá</p>
                                </div>
                                <!-- Rating 2: Sad -->
                                <div class="rating-option cursor-pointer text-center" data-rating="2">
                                    <div
                                        class="w-12 h-12 flex items-center justify-center text-4xl text-gray-400 hover:text-orange-500 transition-colors rating-face">
                                        üòï
                                    </div>
                                    <p class="text-xs mt-1 text-gray-500">T·ªá</p>
                                </div>
                                <!-- Rating 3: Neutral -->
                                <div class="rating-option cursor-pointer text-center" data-rating="3">
                                    <div class="w-12 h-12 flex items-center justify-center text-4xl text-gray-400 hover:text-yellow-500 transition-colors rating-face"
                                        style="margin-left: 0.4rem">
                                        üòê
                                    </div>
                                    <p class="text-xs mt-1 text-gray-500">B√¨nh th∆∞·ªùng</p>
                                </div>
                                <!-- Rating 4: Happy -->
                                <div class="rating-option cursor-pointer text-center" data-rating="4">
                                    <div
                                        class="w-12 h-12 flex items-center justify-center text-4xl text-gray-400 hover:text-green-500 transition-colors rating-face">
                                        üòä
                                    </div>
                                    <p class="text-xs mt-1 text-gray-500">T·ªët</p>
                                </div>
                                <!-- Rating 5: Love -->
                                <div class="rating-option cursor-pointer text-center" data-rating="5">
                                    <div
                                        class="w-12 h-12 flex items-center justify-center text-4xl text-gray-400 hover:text-pink-500 transition-colors rating-face">
                                        üòç
                                    </div>
                                    <p class="text-xs mt-1 text-gray-500">Xu·∫•t s·∫Øc</p>
                                </div>
                            </div>
                            <div id="rating-feedback" class="text-center text-sm text-gray-600 hidden">
                                C·∫£m ∆°n b·∫°n ƒë√£ ƒë√°nh gi√°!
                            </div>
                        </div>

                        <!-- Action Buttons - Moved from right column -->
                        <div class="border-t border-gray-200 pt-6 space-y-3">
                            <button id="add-to-cart-btn"
                                class="w-full bg-green-600 hover:bg-green-700 text-white font-medium py-3 px-4 rounded-lg transition-colors">
                                Th√™m v√†o gi·ªè h√†ng
                            </button>
                            <button id="contact-seller-btn"
                                class="w-full border border-green-600 text-green-600 hover:bg-green-50 font-medium py-3 px-4 rounded-lg transition-colors">
                                Li√™n h·ªá ng∆∞·ªùi b√°n
                            </button>
                        </div>
                    </div>

                    <!-- Product Info -->
                    <div class="space-y-6">
                        <!-- Category and Condition -->
                        <div class="flex items-center space-x-4">
                            <span id="product-category"
                                class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800"></span>
                            <span id="product-condition"
                                class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800"></span>
                        </div>

                        <!-- Product Title -->
                        <h1 id="product-title-main" class="text-3xl font-bold text-gray-900"></h1>

                        <!-- Product ID and Date -->
                        <div class="flex items-center space-x-4 text-sm text-gray-500">
                            <span id="product-id"></span>
                            <span id="product-date"></span>
                        </div>

                        <!-- Price -->
                        <div class="border-t border-gray-200 pt-6">
                            <h2 class="sr-only">Product information</h2>
                            <p class="text-3xl tracking-tight text-green-600 font-bold" id="product-price"></p>
                        </div>

                        <!-- Seller Profile Card -->
                        <div class="border-t border-gray-200 pt-6">
                            <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-3">
                                        <div
                                            class="w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-lg">
                                            TH
                                        </div>
                                        <div>
                                            <h4 class="font-semibold text-gray-900">Tr·∫ßn H·ªØu H·∫£i ƒêƒÉng</h4>
                                            <p class="text-sm text-gray-500">TK ƒë·ªãnh danh: C0888293</p>
                                        </div>
                                    </div>
                                    <div class="flex flex-col items-center">
                                        <div id="seller-rating-face" class="w-8 h-8 mb-1">
                                            <!-- Smiley face will be rendered here -->
                                            <svg class="w-8 h-8 text-yellow-400" fill="currentColor"
                                                viewBox="0 0 24 24">
                                                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"
                                                    fill="none" />
                                                <path d="M8 14s1.5 2 4 2 4-2 4-2" />
                                                <path d="M9 9h.01M15 9h.01" />
                                            </svg>
                                        </div>
                                        <span id="seller-total-ratings" class="text-xs text-gray-600">0 ƒë√°nh gi√°</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Seller Information -->
                        <div class="border-t border-gray-200 pt-6">
                            <h3 class="text-lg font-medium text-gray-900 mb-4">Th√¥ng tin ng∆∞·ªùi b√°n</h3>
                            <div class="space-y-3">
                                <div class="flex items-center">
                                    <svg class="w-5 h-5 text-gray-400 mr-3" fill="none" stroke="currentColor"
                                        viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z">
                                        </path>
                                    </svg>
                                    <span id="seller-name" class="text-gray-700"></span>
                                </div>
                                <div class="flex items-center">
                                    <svg class="w-5 h-5 text-gray-400 mr-3" fill="none" stroke="currentColor"
                                        viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z">
                                        </path>
                                    </svg>
                                    <span id="seller-phone" class="text-gray-700"></span>
                                </div>
                                <div class="flex items-center">
                                    <svg class="w-5 h-5 text-gray-400 mr-3" fill="none" stroke="currentColor"
                                        viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z">
                                        </path>
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                    </svg>
                                    <span id="seller-address" class="text-gray-700"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Product Description -->
                <div class="border-t border-gray-200 pt-8 mb-12">
                    <h3 class="text-lg font-medium text-gray-900 mb-4">C√¢u chuy·ªán c·ªßa m√≥n ƒë·ªì</h3>
                    <div class="prose max-w-none">
                        <p id="product-description" class="text-gray-700 leading-relaxed"></p>
                    </div>
                </div>

                <!-- Related Products Section -->
                <div class="border-t border-gray-200 pt-8">
                    <h3 class="text-2xl font-bold text-gray-900 mb-6">S·∫£n ph·∫©m li√™n quan</h3>
                    <div id="related-products" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                        <!-- Related products will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.0/flowbite.min.js"></script>
    <script>
        // Optimized JavaScript with better error handling and performance
        (function () {
            'use strict';

            // Cache DOM elements and state
            let isDropdownOpen = false;
            let eventListenersAttached = false;

            // Utility functions
            const utils = {
                createElement: (tag, className, attributes = {}) => {
                    const element = document.createElement(tag);
                    if (className) element.className = className;
                    Object.entries(attributes).forEach(([key, value]) => {
                        element.setAttribute(key, value);
                    });
                    return element;
                },

                debounce: (func, wait) => {
                    let timeout;
                    return function executedFunction(...args) {
                        const later = () => {
                            clearTimeout(timeout);
                            func(...args);
                        };
                        clearTimeout(timeout);
                        timeout = setTimeout(later, wait);
                    };
                },

                validateFile: (file) => {
                    const maxSize = 10 * 1024 * 1024; // 10MB
                    const allowedTypes = ['image/', 'video/'];

                    if (!file) return { valid: false, error: 'Kh√¥ng c√≥ file ƒë∆∞·ª£c ch·ªçn' };
                    if (file.size > maxSize) return { valid: false, error: 'File qu√° l·ªõn. Vui l√≤ng ch·ªçn file nh·ªè h∆°n 10MB.' };
                    if (!allowedTypes.some(type => file.type.startsWith(type))) {
                        return { valid: false, error: 'ƒê·ªãnh d·∫°ng file kh√¥ng ƒë∆∞·ª£c h·ªó tr·ª£. Ch·ªâ ch·∫•p nh·∫≠n h√¨nh ·∫£nh v√† video.' };
                    }

                    return { valid: true };
                },

                safeLocalStorage: {
                    setItem: (key, value) => {
                        try {
                            localStorage.setItem(key, JSON.stringify(value));
                            return true;
                        } catch (error) {
                            console.warn('Kh√¥ng th·ªÉ l∆∞u v√†o localStorage:', error);
                            return false;
                        }
                    },

                    getItem: (key) => {
                        try {
                            const item = localStorage.getItem(key);
                            return item ? JSON.parse(item) : null;
                        } catch (error) {
                            console.warn('Kh√¥ng th·ªÉ ƒë·ªçc t·ª´ localStorage:', error);
                            return null;
                        }
                    }
                }
            };

            // Initialize when DOM is ready
            document.addEventListener('DOMContentLoaded', function () {
                initDropdown();
                initAvatarSystem();
            });
            function updateCartCount() {
                const cart = utils.safeLocalStorage.getItem('cart') || [];
                const cartCount = cart.reduce((total, item) => {
                    return total + (parseInt(item.quantity) || 0);
                }, 0);

                const cartCountElement = document.getElementById('cart-count');

                if (cartCountElement) {
                    if (cartCount > 0) {
                        cartCountElement.textContent = cartCount > 99 ? '99+' : cartCount;
                        cartCountElement.classList.remove('hidden');
                    } else {
                        cartCountElement.classList.add('hidden');
                    }
                }
            }

            // --- 1. Dropdown Management ---
            function initDropdown() {
                const dropdownToggle = document.getElementById('dropdown-toggle');
                const dropdownContent = document.getElementById('dropdown-content');
                const arrowIcon = document.getElementById('arrow-icon');

                if (!dropdownToggle || !dropdownContent || !arrowIcon) {
                    console.warn('Dropdown elements not found');
                    return;
                }

                const toggleDropdown = (e) => {
                    e.stopPropagation();
                    isDropdownOpen = !isDropdownOpen;

                    dropdownContent.classList.toggle('hidden', !isDropdownOpen);
                    arrowIcon.classList.toggle('rotate-180', isDropdownOpen);
                };

                const closeDropdown = () => {
                    if (isDropdownOpen) {
                        isDropdownOpen = false;
                        dropdownContent.classList.add('hidden');
                        arrowIcon.classList.remove('rotate-180');
                    }
                };

                // Click outside to close dropdown
                const handleOutsideClick = (event) => {
                    if (!dropdownToggle.contains(event.target) && !dropdownContent.contains(event.target)) {
                        closeDropdown();
                    }
                };

                // Escape key to close dropdown
                const handleKeyPress = (event) => {
                    if (event.key === 'Escape' && isDropdownOpen) {
                        closeDropdown();
                    }
                };

                // Attach event listeners
                dropdownToggle.addEventListener('click', toggleDropdown);
                document.addEventListener('click', handleOutsideClick);
                document.addEventListener('keydown', handleKeyPress);
            }

            // --- 2. Avatar System ---
            function initAvatarSystem() {
                const avatarFileInput = document.getElementById('avatar-input');
                const navAvatarContainer = document.querySelector('.relative.h-8.w-8');
                const avatarContainer = document.getElementById('avatar-container');

                if (!avatarFileInput || !avatarContainer) {
                    console.warn('Avatar elements not found');
                    return;
                }

                // Create avatar element based on type and container
                function createAvatarElement(src, type, containerType) {
                    let element;
                    const isImage = type.startsWith('image/');
                    const isVideo = type.startsWith('video/');

                    if (isImage) {
                        element = utils.createElement('img', '', {
                            src,
                            alt: 'Avatar',
                            loading: 'lazy'
                        });
                    } else if (isVideo) {
                        element = utils.createElement('video', '', {
                            src,
                            autoplay: 'true',
                            loop: 'true',
                            muted: 'true'
                        });
                    }

                    if (element) {
                        element.className = containerType === 'nav'
                            ? 'h-8 w-8 rounded-full object-cover'
                            : 'h-12 w-12 rounded-full object-cover';

                        // Add error handling for media elements
                        element.onerror = () => {
                            console.error('Failed to load avatar media');
                            // Could implement fallback avatar here
                        };
                    }

                    return element;
                }

                // Update avatar display in all locations
                function updateAvatarDisplay(src, type) {
                    // Update nav avatar
                    if (navAvatarContainer) {
                        const newNavAvatar = createAvatarElement(src, type, 'nav');
                        if (newNavAvatar) {
                            navAvatarContainer.innerHTML = '';
                            navAvatarContainer.appendChild(newNavAvatar);
                        }
                    }

                    // Update dropdown avatar
                    if (avatarContainer) {
                        const currentAvatar = avatarContainer.querySelector('svg, img, video');
                        const newDropdownAvatar = createAvatarElement(src, type, 'dropdown');

                        if (currentAvatar && newDropdownAvatar) {
                            currentAvatar.replaceWith(newDropdownAvatar);
                        }

                        // Ensure pencil button exists and is functional
                        ensurePencilButton();
                    }
                }

                // Ensure pencil edit button exists and works
                function ensurePencilButton() {
                    let pencilButton = avatarContainer.querySelector('#pencil-edit-button');

                    if (!pencilButton) {
                        pencilButton = utils.createElement('button',
                            'absolute -bottom-1 -right-1 bg-white rounded-full p-0.5 shadow-md hover:bg-gray-50 transition-colors z-10',
                            {
                                id: 'pencil-edit-button',
                                title: 'ƒê·ªïi avatar',
                                'aria-label': 'ƒê·ªïi avatar'
                            }
                        );

                        pencilButton.innerHTML = `
                                <svg class="h-3 w-3 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                                          d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z">
                                    </path>
                                </svg>
                            `;

                        avatarContainer.appendChild(pencilButton);
                    }

                    // Remove existing listeners to prevent duplicates
                    const newPencilButton = pencilButton.cloneNode(true);
                    pencilButton.replaceWith(newPencilButton);

                    // Add click handler
                    newPencilButton.addEventListener('click', (e) => {
                        e.preventDefault();
                        e.stopPropagation();
                        avatarFileInput.click();
                    });
                }

                // Handle file input change
                const handleFileChange = utils.debounce((event) => {
                    const file = event.target.files[0];
                    const validation = utils.validateFile(file);

                    if (!validation.valid) {
                        alert(validation.error);
                        // Reset input
                        event.target.value = '';
                        return;
                    }

                    const reader = new FileReader();

                    reader.onload = (e) => {
                        const src = e.target.result;
                        const type = file.type;

                        updateAvatarDisplay(src, type);
                        utils.safeLocalStorage.setItem('avatar', { src, type });
                    };

                    reader.onerror = () => {
                        alert('L·ªói khi ƒë·ªçc file. Vui l√≤ng th·ª≠ l·∫°i.');
                    };

                    reader.readAsDataURL(file);
                }, 300);

                // Load saved avatar from localStorage
                function loadSavedAvatar() {
                    const savedAvatar = utils.safeLocalStorage.getItem('avatar');
                    if (savedAvatar && savedAvatar.src && savedAvatar.type) {
                        updateAvatarDisplay(savedAvatar.src, savedAvatar.type);
                    } else {
                        // Ensure default pencil button is functional
                        ensurePencilButton();
                    }
                }

                // Initialize avatar system
                avatarFileInput.addEventListener('change', handleFileChange);
                loadSavedAvatar();
            }

            // Update cart count in navigation
            function updateCartCount() {
                const cart = utils.safeLocalStorage.getItem('cart') || [];
                const cartCount = cart.reduce((total, item) => {
                    return total + (parseInt(item.quantity) || 0);
                }, 0);

                const cartCountElement = document.getElementById('cart-count');

                if (cartCountElement) {
                    if (cartCount > 0) {
                        cartCountElement.textContent = cartCount > 99 ? '99+' : cartCount;
                        cartCountElement.classList.remove('hidden');
                    } else {
                        cartCountElement.classList.add('hidden');
                    }
                }
            }

            // Search functionality
            function initializeSearch() {
                const searchInput = document.getElementById('search-input');
                const searchBtn = document.getElementById('search-btn');
                const categoryFilter = document.getElementById('category-filter');
                const searchTags = document.querySelectorAll('.search-tag');

                // Handle search button click
                function performSearch() {
                    const searchTerm = searchInput.value.trim();
                    const category = categoryFilter.value;

                    // Build URL parameters
                    const params = new URLSearchParams();
                    if (searchTerm) params.set('search', searchTerm);
                    if (category) params.set('category', category);

                    // Redirect to mua.html with search parameters
                    const url = category || searchTerm ? `mua.html?${params.toString()}` : 'mua.html';
                    window.location.href = url;
                }

                // Event listeners
                if (searchBtn) {
                    searchBtn.addEventListener('click', performSearch);
                }

                if (searchInput) {
                    searchInput.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') {
                            e.preventDefault();
                            performSearch();
                        }
                    });
                }

                // Handle category filter change
                if (categoryFilter) {
                    categoryFilter.addEventListener('change', () => {
                        if (categoryFilter.value) {
                            performSearch();
                        }
                    });
                }

                // Handle search tag clicks
                searchTags.forEach(tag => {
                    tag.addEventListener('click', () => {
                        const filter = tag.getAttribute('data-filter');
                        if (filter) {
                            searchInput.value = filter;
                            performSearch();
                        }
                    });
                });

                // Update cart count when page loads
                updateCartCount();
            }

            // Initialize search functionality
            initializeSearch();
        })();
    </script>
    <script>
        // Product detail page functionality
        (function () {
            'use strict';

            let currentProduct = null;
            let allProducts = [];

            // Category mapping
            const categoryNames = {
                'A': 'ƒê·ªì ƒëi·ªán t·ª≠',
                'B': 'B·∫•t ƒë·ªông s·∫£n',
                'C': 'ƒê·ªì gia d·ª•ng',
                'D': 'Xe c·ªô',
                'E': 'Th·ªùi trang',
                'F': 'S√°ch v·ªü',
                'G': 'Th·ªÉ thao',
                'H': 'Kh√°c'
            };

            // Utility functions
            const utils = {
                safeLocalStorage: {
                    setItem: (key, value) => {
                        try {
                            localStorage.setItem(key, JSON.stringify(value));
                            return true;
                        } catch (error) {
                            console.warn('Kh√¥ng th·ªÉ l∆∞u v√†o localStorage:', error);
                            return false;
                        }
                    },

                    getItem: (key) => {
                        try {
                            const item = localStorage.getItem(key);
                            return item ? JSON.parse(item) : null;
                        } catch (error) {
                            console.warn('Kh√¥ng th·ªÉ ƒë·ªçc t·ª´ localStorage:', error);
                            return null;
                        }
                    }
                },

                formatPrice: (price) => {
                    if (!price) return '0 ‚Ç´';
                    return new Intl.NumberFormat('vi-VN').format(price) + ' ‚Ç´';
                },

                formatDate: (dateString) => {
                    const date = new Date(dateString);
                    return date.toLocaleDateString('vi-VN');
                },

                getUrlParameter: (name) => {
                    const urlParams = new URLSearchParams(window.location.search);
                    return urlParams.get(name);
                }
            };

            // Rating System
            const RatingSystem = {
                // Seller ratings data
                sellers: {
                    'C0888293': {
                        name: 'Tr·∫ßn H·ªØu H·∫£i ƒêƒÉng',
                        id: 'C0888293',
                        ratings: []
                    }
                },

                // Rating faces configuration
                ratingConfig: {
                    1: { color: 'text-red-500', name: 'R·∫•t kh√¥ng h√†i l√≤ng' },
                    2: { color: 'text-orange-500', name: 'Kh√¥ng h√†i l√≤ng' },
                    3: { color: 'text-yellow-500', name: 'B√¨nh th∆∞·ªùng' },
                    4: { color: 'text-green-500', name: 'H√†i l√≤ng' },
                    5: { color: 'text-pink-500', name: 'R·∫•t h√†i l√≤ng' }
                },

                // Get rating face emoji
                getRatingFaceEmoji: function (rating) {
                    const config = this.ratingConfig[rating];
                    if (!config) return 'üòê';

                    const emojiElements = {
                        1: 'üò≠', // Very sad with tears
                        2: 'üòï', // Confused/disappointed
                        3: 'üòê', // Neutral
                        4: 'üòä', // Happy
                        5: 'üòç'  // Love/heart eyes
                    };

                    return emojiElements[rating] || emojiElements[3];
                },

                // Initialize rating system
                init: function () {
                    this.loadRatings();
                    this.bindEvents();
                    this.updateSellerRating();
                },

                // Load ratings from localStorage
                loadRatings: function () {
                    const saved = utils.safeLocalStorage.getItem('sellerRatings');
                    if (saved) {
                        this.sellers = saved;
                    }
                },

                // Save ratings to localStorage
                saveRatings: function () {
                    utils.safeLocalStorage.setItem('sellerRatings', this.sellers);
                },

                // Add rating for current product
                addRating: function (productId, rating) {
                    const sellerId = 'C0888293'; // Default seller
                    if (!this.sellers[sellerId]) {
                        this.sellers[sellerId] = {
                            name: 'Tr·∫ßn H·ªØu H·∫£i ƒêƒÉng',
                            id: sellerId,
                            ratings: []
                        };
                    }

                    // Remove existing rating for this product
                    this.sellers[sellerId].ratings = this.sellers[sellerId].ratings.filter(r => r.productId !== productId);

                    // Add new rating
                    this.sellers[sellerId].ratings.push({
                        productId: productId,
                        rating: rating,
                        timestamp: new Date().toISOString()
                    });

                    this.saveRatings();
                    this.updateSellerRating();
                },

                // Calculate average rating for seller
                getSellerAverageRating: function (sellerId) {
                    const seller = this.sellers[sellerId];
                    if (!seller || !seller.ratings.length) return 3; // Default neutral

                    const total = seller.ratings.reduce((sum, r) => sum + r.rating, 0);
                    return Math.round(total / seller.ratings.length);
                },

                // Update seller rating display
                updateSellerRating: function () {
                    const sellerId = 'C0888293';
                    const avgRating = this.getSellerAverageRating(sellerId);
                    const totalRatings = this.sellers[sellerId] ? this.sellers[sellerId].ratings.length : 0;

                    const faceElement = document.getElementById('seller-rating-face');
                    const countElement = document.getElementById('seller-total-ratings');

                    if (faceElement) {
                        faceElement.innerHTML = `<span style="font-size: 2rem; line-height: 1;">${this.getRatingFaceEmoji(avgRating)}</span>`;
                    }

                    if (countElement) {
                        countElement.textContent = `${totalRatings} ƒë√°nh gi√°`;
                    }
                },

                // Enhanced bind rating events with professional animations
                bindEvents: function () {
                    const ratingOptions = document.querySelectorAll('.rating-option');

                    ratingOptions.forEach((option, index) => {
                        // Add staggered entrance animation
                        option.style.animationDelay = `${index * 0.1}s`;

                        // Mouse enter - enhanced hover effect
                        option.addEventListener('mouseenter', (e) => {
                            this.createHoverParticles(option);
                            this.playHoverSound();
                        });

                        // Mouse leave - reset hover effects
                        option.addEventListener('mouseleave', (e) => {
                            this.removeHoverParticles(option);
                        });

                        // Click event with advanced animations
                        option.addEventListener('click', (e) => {
                            e.preventDefault();
                            const rating = parseInt(option.dataset.rating);
                            const productId = utils.getUrlParameter('id');

                            if (productId) {
                                // Trigger ripple effect
                                this.createRippleEffect(option, e);

                                // Trigger click particles
                                this.createClickParticles(option);

                                // Remove previous selection with animation
                                this.deselectAllOptions(ratingOptions);

                                // Add selection with enhanced animation
                                this.selectOption(option, rating);

                                // Shake other options slightly
                                this.shakeOtherOptions(ratingOptions, option);

                                // Add rating with animation feedback
                                this.addRating(productId, rating);

                                // Show enhanced feedback
                                this.showEnhancedRatingFeedback(rating);

                                // Play success sound/vibration
                                this.playSuccessEffect();

                                // Update other UI elements with animations
                                this.updateUIWithAnimation();
                            }
                        });

                        // Touch events for mobile
                        option.addEventListener('touchstart', (e) => {
                            option.classList.add('touch-active');
                        });

                        option.addEventListener('touchend', (e) => {
                            option.classList.remove('touch-active');
                        });
                    });
                },

                // Create ripple effect on click
                createRippleEffect: function (element, event) {
                    element.classList.add('clicked');

                    setTimeout(() => {
                        element.classList.remove('clicked');
                    }, 600);
                },

                // Create hover particles
                createHoverParticles: function (element) {
                    // Create subtle glow particles around the element
                    for (let i = 0; i < 3; i++) {
                        const particle = document.createElement('div');
                        particle.className = 'hover-particle';
                        particle.style.cssText = `
                            position: absolute;
                            width: 4px;
                            height: 4px;
                            background: radial-gradient(circle, rgba(255,255,255,0.8) 0%, transparent 70%);
                            border-radius: 50%;
                            pointer-events: none;
                            z-index: 1000;
                            animation: floatParticle 2s ease-out infinite;
                        `;

                        const rect = element.getBoundingClientRect();
                        particle.style.left = (rect.left + Math.random() * rect.width) + 'px';
                        particle.style.top = (rect.top + Math.random() * rect.height) + 'px';

                        document.body.appendChild(particle);

                        setTimeout(() => {
                            if (particle.parentNode) {
                                particle.parentNode.removeChild(particle);
                            }
                        }, 2000);
                    }
                },

                // Remove hover particles
                removeHoverParticles: function (element) {
                    const particles = document.querySelectorAll('.hover-particle');
                    particles.forEach(particle => {
                        particle.style.opacity = '0';
                        setTimeout(() => {
                            if (particle.parentNode) {
                                particle.parentNode.removeChild(particle);
                            }
                        }, 300);
                    });
                },

                // Create click particles explosion
                createClickParticles: function (element) {
                    const rect = element.getBoundingClientRect();
                    const centerX = rect.left + rect.width / 2;
                    const centerY = rect.top + rect.height / 2;

                    // Create multiple particles with different directions
                    for (let i = 0; i < 8; i++) {
                        const particle = document.createElement('div');
                        particle.className = 'click-particle';
                        particle.style.cssText = `
                            position: fixed;
                            width: 6px;
                            height: 6px;
                            background: linear-gradient(45deg, #ffd700, #ffec8c);
                            border-radius: 50%;
                            pointer-events: none;
                            z-index: 1001;
                            left: ${centerX}px;
                            top: ${centerY}px;
                        `;

                        document.body.appendChild(particle);

                        // Animate particle in random direction
                        const angle = (i / 8) * Math.PI * 2;
                        const distance = 50 + Math.random() * 30;
                        const endX = centerX + Math.cos(angle) * distance;
                        const endY = centerY + Math.sin(angle) * distance;

                        particle.animate([
                            {
                                transform: 'translate(0, 0) scale(1)',
                                opacity: 1
                            },
                            {
                                transform: `translate(${endX - centerX}px, ${endY - centerY}px) scale(0)`,
                                opacity: 0
                            }
                        ], {
                            duration: 800,
                            easing: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)'
                        }).addEventListener('finish', () => {
                            if (particle.parentNode) {
                                particle.parentNode.removeChild(particle);
                            }
                        });
                    }
                },

                // Deselect all options with animation
                deselectAllOptions: function (options) {
                    options.forEach(opt => {
                        if (opt.classList.contains('selected')) {
                            opt.classList.remove('selected');
                            // Add deselect animation
                            opt.style.animation = 'deselectBounce 0.3s ease-out';
                            setTimeout(() => {
                                opt.style.animation = '';
                            }, 300);
                        }
                    });
                },

                // Select option with enhanced animation
                selectOption: function (option, rating) {
                    option.classList.add('selected');

                    // Update face color with animation
                    const face = option.querySelector('.rating-face');
                    const config = this.ratingConfig[rating];
                    if (face && config) {
                        // Temporary scale up effect
                        face.style.transform = 'scale(1.5)';
                        setTimeout(() => {
                            face.className = `w-12 h-12 ${config.color} transition-colors rating-face flex items-center justify-center text-4xl`;
                            face.style.transform = '';
                        }, 150);
                    }
                },

                // Shake other unselected options
                shakeOtherOptions: function (options, selectedOption) {
                    options.forEach(opt => {
                        if (opt !== selectedOption) {
                            opt.style.animation = 'subtleShake 0.4s ease-in-out';
                            setTimeout(() => {
                                opt.style.animation = '';
                            }, 400);
                        }
                    });
                },

                // Enhanced rating feedback with dynamic content
                showEnhancedRatingFeedback: function (rating) {
                    const feedback = document.getElementById('rating-feedback');
                    const config = this.ratingConfig[rating];

                    if (feedback && config) {
                        // Create dynamic feedback based on rating
                        const emoji = this.getRatingFaceEmoji(rating);
                        const messages = {
                            1: 'Ch√∫ng t√¥i r·∫•t ti·∫øc v√¨ tr·∫£i nghi·ªám ch∆∞a t·ªët c·ªßa b·∫°n!',
                            2: 'C·∫£m ∆°n ph·∫£n h·ªìi, ch√∫ng t√¥i s·∫Ω c·∫£i thi·ªán!',
                            3: 'C·∫£m ∆°n b·∫°n ƒë√£ ƒë√°nh gi√° s·∫£n ph·∫©m!',
                            4: 'Tuy·ªát v·ªùi! C·∫£m ∆°n b·∫°n ƒë√£ h√†i l√≤ng!',
                            5: 'Wow! C·∫£m ∆°n b·∫°n ƒë√£ y√™u th√≠ch s·∫£n ph·∫©m!'
                        };

                        feedback.innerHTML = `
                            <div class="flex items-center justify-center space-x-3">
                                <span class="text-2xl">${emoji}</span>
                                <span class="font-medium">${messages[rating]}</span>
                            </div>
                        `;

                        feedback.classList.remove('hidden');
                        feedback.classList.add('show');

                        // Auto hide with fade out
                        setTimeout(() => {
                            feedback.classList.remove('show');
                            setTimeout(() => {
                                feedback.classList.add('hidden');
                            }, 500);
                        }, 3000);
                    }
                },

                // Play success effect (vibration on mobile, sound effect simulation)
                playSuccessEffect: function () {
                    // Haptic feedback for mobile
                    if (navigator.vibrate) {
                        navigator.vibrate([50, 30, 50]);
                    }

                    // Visual success indicator
                    this.showSuccessFlash();
                },

                // Show success flash effect
                showSuccessFlash: function () {
                    const flash = document.createElement('div');
                    flash.style.cssText = `
                        position: fixed;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        background: radial-gradient(circle, rgba(255,215,0,0.3) 0%, transparent 70%);
                        pointer-events: none;
                        z-index: 9999;
                        animation: successFlash 0.6s ease-out;
                    `;

                    document.body.appendChild(flash);

                    setTimeout(() => {
                        if (flash.parentNode) {
                            flash.parentNode.removeChild(flash);
                        }
                    }, 600);
                },

                // Play hover sound effect (visual feedback)
                playHoverSound: function () {
                    // Create subtle visual feedback for hover
                    // This simulates audio feedback with visual cues
                },

                // Update UI elements with animation
                updateUIWithAnimation: function () {
                    // Animate seller rating update
                    const sellerRating = document.getElementById('seller-rating-face');
                    if (sellerRating) {
                        sellerRating.style.animation = 'pulse 0.8s ease-in-out';
                        setTimeout(() => {
                            sellerRating.style.animation = '';
                        }, 800);
                    }
                }
            };

            // Initialize when DOM is ready
            document.addEventListener('DOMContentLoaded', function () {
                loadProductDetails();
                RatingSystem.init();
            });

            // Enhanced product stories with icons and detailed descriptions
            function getEnhancedProductStory(product) {
                const stories = {
                    'SP001': `
                        <div class="space-y-6">
                            <!-- Main Story -->
                            <div class="bg-gradient-to-r from-purple-50 to-indigo-50 p-6 rounded-lg border border-purple-200">
                                <div class="flex items-center mb-4">
                                    <div class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mr-4">
                                        <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
                                        </svg>
                                    </div>
                                    <h4 class="text-xl font-bold text-purple-800">C√¢u chuy·ªán c·ªßa chi·∫øc iPhone 14 Pro Max</h4>
                                </div>
                                <p class="text-gray-700 leading-relaxed mb-4">
                                    ${product.description}
                                </p>
                                <p class="text-gray-700 leading-relaxed">
                                    Chi·∫øc iPhone n√†y ƒë∆∞·ª£c mua t·ª´ Apple Store ch√≠nh h√£ng t·∫°i Vi·ªát Nam v√†o th√°ng 3/2024. T√¥i ƒë√£ ch·ªçn m√†u t√≠m Deep Purple v√¨ n√≥ th·ªÉ hi·ªán s·ª± sang tr·ªçng v√† ƒë·ªôc ƒë√°o. M√°y v·∫´n c√≤n nguy√™n seal, ch∆∞a ƒë∆∞·ª£c k√≠ch ho·∫°t m·ªôt l·∫ßn n√†o, ƒë·∫£m b·∫£o b·∫°n s·∫Ω l√† ng∆∞·ªùi ƒë·∫ßu ti√™n s·ª≠ d·ª•ng.
                                </p>
                            </div>

                            <!-- Product Features -->
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                                    <div class="flex items-center mb-3">
                                        <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3">
                                            <svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                            </svg>
                                        </div>
                                        <h5 class="font-semibold text-gray-800">B·∫£o h√†nh ch√≠nh h√£ng</h5>
                                    </div>
                                    <p class="text-sm text-gray-600">12 th√°ng b·∫£o h√†nh Apple, c√≥ th·ªÉ ki·ªÉm tra b·∫£o h√†nh tr√™n website Apple</p>
                                </div>

                                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                                    <div class="flex items-center mb-3">
                                        <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3">
                                            <svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path>
                                            </svg>
                                        </div>
                                        <h5 class="font-semibold text-gray-800">C√≤n nguy√™n h·ªôp</h5>
                                    </div>
                                    <p class="text-sm text-gray-600">ƒê·∫ßy ƒë·ªß ph·ª• ki·ªán: c√°p s·∫°c, s√°ch h∆∞·ªõng d·∫´n, kim ch·ªçc sim</p>
                                </div>

                                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                                    <div class="flex items-center mb-3">
                                        <div class="w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center mr-3">
                                            <svg class="w-4 h-4 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2m-9 1v16a2 2 0 002 2h8a2 2 0 002-2V5H7z"></path>
                                            </svg>
                                        </div>
                                        <h5 class="font-semibold text-gray-800">M√†u s·∫Øc ƒë·∫∑c bi·ªát</h5>
                                    </div>
                                    <p class="text-sm text-gray-600">Deep Purple - m√†u t√≠m sang tr·ªçng, ch·ªâ c√≥ tr√™n iPhone 14 Pro series</p>
                                </div>

                                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                                    <div class="flex items-center mb-3">
                                        <div class="w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center mr-3">
                                            <svg class="w-4 h-4 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                            </svg>
                                        </div>
                                        <h5 class="font-semibold text-gray-800">Hi·ªáu nƒÉng m·∫°nh m·∫Ω</h5>
                                    </div>
                                    <p class="text-sm text-gray-600">Chip A16 Bionic, camera 48MP Pro, Dynamic Island</p>
                                </div>
                            </div>

                            <!-- Seller's Note -->
                            <div class="bg-amber-50 p-4 rounded-lg border border-amber-200">
                                <div class="flex items-start">
                                    <div class="w-8 h-8 bg-amber-100 rounded-full flex items-center justify-center mr-3 mt-1">
                                        <svg class="w-4 h-4 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                        </svg>
                                    </div>
                                    <div>
                                        <h5 class="font-semibold text-amber-800 mb-2">L·ªùi nh·∫Øn t·ª´ ng∆∞·ªùi b√°n</h5>
                                        <p class="text-sm text-amber-700">
                                            "T√¥i b√°n m√°y n√†y v√¨ ƒë√£ ƒë∆∞·ª£c t·∫∑ng m·ªôt chi·∫øc iPhone 15 Pro Max m·ªõi. M√°y ho√†n to√†n ch∆∞a s·ª≠ d·ª•ng, 
                                            t√¥i cam k·∫øt 100% ch√≠nh h√£ng. C√≥ th·ªÉ h·∫πn g·∫∑p tr·ª±c ti·∫øp ƒë·ªÉ ki·ªÉm tra m√°y tr∆∞·ªõc khi mua."
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `,
                    'SP002': `
                        <div class="space-y-6">
                            <!-- Main Story -->
                            <div class="bg-gradient-to-r from-gray-50 to-blue-50 p-6 rounded-lg border border-gray-200">
                                <div class="flex items-center mb-4">
                                    <div class="w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mr-4">
                                        <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                                        </svg>
                                    </div>
                                    <h4 class="text-xl font-bold text-gray-800">C√¢u chuy·ªán c·ªßa chi·∫øc MacBook Air M2</h4>
                                </div>
                                <p class="text-gray-700 leading-relaxed mb-4">
                                    ${product.description}
                                </p>
                                <p class="text-gray-700 leading-relaxed">
                                    Chi·∫øc MacBook n√†y ƒë∆∞·ª£c mua v√†o th√°ng 7/2023 ƒë·ªÉ ph·ª•c v·ª• cho vi·ªác h·ªçc t·∫≠p t·∫°i ƒë·∫°i h·ªçc. T√¥i ch·ªß y·∫øu s·ª≠ d·ª•ng cho 
                                    vi·ªác code, l√†m b√°o c√°o v√† xem phim. M√°y ƒë∆∞·ª£c b·∫£o qu·∫£n c·∫©n th·∫≠n, lu√¥n ƒë·∫∑t trong t√∫i ch·ªëng s·ªëc khi di chuy·ªÉn.
                                </p>
                            </div>

                            <!-- Product Features -->
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                                    <div class="flex items-center mb-3">
                                        <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3">
                                            <svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                            </svg>
                                        </div>
                                        <h5 class="font-semibold text-gray-800">Hi·ªáu nƒÉng v∆∞·ª£t tr·ªôi</h5>
                                    </div>
                                    <p class="text-sm text-gray-600">Chip M2 8-core CPU, 8-core GPU, x·ª≠ l√Ω m·ªçi t√°c v·ª• m∆∞·ª£t m√†</p>
                                </div>

                                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                                    <div class="flex items-center mb-3">
                                        <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3">
                                            <svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                                            </svg>
                                        </div>
                                        <h5 class="font-semibold text-gray-800">M√†n h√¨nh s·∫Øc n√©t</h5>
                                    </div>
                                    <p class="text-sm text-gray-600">13.6 inch Liquid Retina, ƒë·ªô s√°ng 500 nits, h·ªó tr·ª£ 1 t·ª∑ m√†u</p>
                                </div>

                                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                                    <div class="flex items-center mb-3">
                                        <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3">
                                            <svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                            </svg>
                                        </div>
                                        <h5 class="font-semibold text-gray-800">T√¨nh tr·∫°ng 99%</h5>
                                    </div>
                                    <p class="text-sm text-gray-600">Kh√¥ng tr·∫ßy x∆∞·ªõc, m√†n h√¨nh ho√†n h·∫£o, pin v·∫´n c√≤n 95% dung l∆∞·ª£ng</p>
                                </div>

                                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                                    <div class="flex items-center mb-3">
                                        <div class="w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center mr-3">
                                            <svg class="w-4 h-4 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                                            </svg>
                                        </div>
                                        <h5 class="font-semibold text-gray-800">ƒê·∫ßy ƒë·ªß ph·ª• ki·ªán</h5>
                                    </div>
                                    <p class="text-sm text-gray-600">H·ªôp, s·∫°c MagSafe, c√°p USB-C, s√°ch h∆∞·ªõng d·∫´n</p>
                                </div>
                            </div>

                            <!-- Usage Story -->
                            <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                                <div class="flex items-start">
                                    <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3 mt-1">
                                        <svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                                        </svg>
                                    </div>
                                    <div>
                                        <h5 class="font-semibold text-blue-800 mb-2">Tr·∫£i nghi·ªám s·ª≠ d·ª•ng</h5>
                                        <p class="text-sm text-blue-700 mb-2">
                                            "Trong su·ªët 1 nƒÉm s·ª≠ d·ª•ng, m√¨nh r·∫•t h√†i l√≤ng v·ªõi hi·ªáu nƒÉng c·ªßa m√°y. Code Python, React, ch·∫°y Docker 
                                            ƒë·ªÅu r·∫•t m∆∞·ª£t. Pin c√≥ th·ªÉ d√πng c·∫£ ng√†y m√† kh√¥ng c·∫ßn s·∫°c."
                                        </p>
                                        <p class="text-sm text-blue-700">
                                            "L√Ω do b√°n l√† v√¨ m√¨nh chuy·ªÉn sang l√†m game dev, c·∫ßn m√°y c√≥ GPU m·∫°nh h∆°n. M√°y n√†y ho√†n h·∫£o cho 
                                            sinh vi√™n, developer, v√† ng∆∞·ªùi d√πng vƒÉn ph√≤ng."
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `,
                    'SP005': `
                        <div class="space-y-6">
                            <!-- Main Story -->
                            <div class="bg-gradient-to-r from-red-50 to-orange-50 p-6 rounded-lg border border-red-200">
                                <div class="flex items-center mb-4">
                                    <div class="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mr-4">
                                        <svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                        </svg>
                                    </div>
                                    <h4 class="text-xl font-bold text-red-800">C√¢u chuy·ªán c·ªßa chi·∫øc Honda Wave Alpha</h4>
                                </div>
                                <p class="text-gray-700 leading-relaxed mb-4">
                                    ${product.description}
                                </p>
                                <p class="text-gray-700 leading-relaxed">
                                    Chi·∫øc xe n√†y ƒë√£ ƒë·ªìng h√†nh c√πng t√¥i trong 4 nƒÉm qua, t·ª´ nh·ªØng ng√†y ƒë·∫ßu ƒëi h·ªçc ƒë·∫°i h·ªçc ƒë·∫øn khi ƒëi l√†m. 
                                    Xe ƒë∆∞·ª£c mua m·ªõi t·ª´ ƒë·∫°i l√Ω Honda ch√≠nh h√£ng, lu√¥n ƒë∆∞·ª£c b·∫£o d∆∞·ª°ng ƒë·ªãnh k·ª≥ ƒë√∫ng l·ªãch t·∫°i Honda.
                                </p>
                            </div>

                            <!-- Product Features -->
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                                    <div class="flex items-center mb-3">
                                        <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3">
                                            <svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                            </svg>
                                        </div>
                                        <h5 class="font-semibold text-gray-800">B·∫£o d∆∞·ª°ng ƒë·ªãnh k·ª≥</h5>
                                    </div>
                                    <p class="text-sm text-gray-600">Thay d·∫ßu, l·ªçc gi√≥ ƒë√∫ng l·ªãch, c√≥ ƒë·∫ßy ƒë·ªß h√≥a ƒë∆°n b·∫£o d∆∞·ª°ng</p>
                                </div>

                                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                                    <div class="flex items-center mb-3">
                                        <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3">
                                            <svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                            </svg>
                                        </div>
                                        <h5 class="font-semibold text-gray-800">Ti·∫øt ki·ªám nhi√™n li·ªáu</h5>
                                    </div>
                                    <p class="text-sm text-gray-600">Ch·ªâ ti√™u th·ª• 1.5L/100km, ƒë·ªông c∆° Honda b·ªÅn b·ªâ</p>
                                </div>

                                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                                    <div class="flex items-center mb-3">
                                        <div class="w-8 h-8 bg-red-100 rounded-full flex items-center justify-center mr-3">
                                            <svg class="w-4 h-4 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                                            </svg>
                                        </div>
                                        <h5 class="font-semibold text-gray-800">S·ªë km √≠t</h5>
                                    </div>
                                    <p class="text-sm text-gray-600">Ch·ªâ 15.000km trong 4 nƒÉm, ch·ªß y·∫øu ƒëi trong th√†nh ph·ªë</p>
                                </div>

                                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                                    <div class="flex items-center mb-3">
                                        <div class="w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center mr-3">
                                            <svg class="w-4 h-4 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                                            </svg>
                                        </div>
                                        <h5 class="font-semibold text-gray-800">C√≤n b·∫£o h√†nh</h5>
                                    </div>
                                    <p class="text-sm text-gray-600">B·∫£o h√†nh ƒë·∫øn th√°ng 12/2025, c√≥ th·ªÉ claim t·∫°i Honda</p>
                                </div>
                            </div>

                            <!-- Technical Details -->
                            <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                <h5 class="font-semibold text-gray-800 mb-3 flex items-center">
                                    <svg class="w-5 h-5 text-gray-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                    </svg>
                                    Th√¥ng s·ªë k·ªπ thu·∫≠t
                                </h5>
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
                                    <div>
                                        <span class="font-medium text-gray-700">ƒê·ªông c∆°:</span>
                                        <p class="text-gray-600">110cc, 4 th√¨</p>
                                    </div>
                                    <div>
                                        <span class="font-medium text-gray-700">H·ªôp s·ªë:</span>
                                        <p class="text-gray-600">S·ªë t·ª± ƒë·ªông</p>
                                    </div>
                                    <div>
                                        <span class="font-medium text-gray-700">Kh·ªüi ƒë·ªông:</span>
                                        <p class="text-gray-600">ƒêi·ªán & ƒë·∫°p</p>
                                    </div>
                                    <div>
                                        <span class="font-medium text-gray-700">B√¨nh xƒÉng:</span>
                                        <p class="text-gray-600">3.7 l√≠t</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Seller's Note -->
                            <div class="bg-orange-50 p-4 rounded-lg border border-orange-200">
                                <div class="flex items-start">
                                    <div class="w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center mr-3 mt-1">
                                        <svg class="w-4 h-4 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                        </svg>
                                    </div>
                                    <div>
                                        <h5 class="font-semibold text-orange-800 mb-2">L√Ω do b√°n xe</h5>
                                        <p class="text-sm text-orange-700">
                                            "T√¥i b√°n xe v√¨ s·∫Øp chuy·ªÉn ƒëi l√†m ·ªü n∆∞·ªõc ngo√†i. Xe n√†y r·∫•t ph√π h·ª£p cho sinh vi√™n ho·∫∑c 
                                            ng∆∞·ªùi ƒëi l√†m trong th√†nh ph·ªë. M√°y n·ªï √™m, kh√¥ng hao xƒÉng, b·∫£o d∆∞·ª°ng r·∫ª. 
                                            C√≥ th·ªÉ h·∫πn g·∫∑p ƒë·ªÉ th·ª≠ xe tr∆∞·ªõc khi quy·∫øt ƒë·ªãnh mua."
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `,
                    'SP006': `
                        <div class="space-y-6">
                            <!-- Main Story -->
                            <div class="bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-lg border border-blue-200">
                                <div class="flex items-center mb-4">
                                    <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mr-4">
                                        <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                        </svg>
                                    </div>
                                    <h4 class="text-xl font-bold text-blue-800">C√¢u chuy·ªán c·ªßa chi·∫øc Apple Watch Series 7</h4>
                                </div>
                                <p class="text-gray-700 leading-relaxed mb-4">
                                    ${product.description}
                                </p>
                                <p class="text-gray-700 leading-relaxed">
                                    Chi·∫øc Apple Watch n√†y ƒë∆∞·ª£c mua ƒë·ªÉ theo d√µi s·ª©c kh·ªèe v√† t·∫≠p th·ªÉ d·ª•c. T√¥i ƒë√£ s·ª≠ d·ª•ng n√≥ ƒë·ªÉ ƒë·∫øm b∆∞·ªõc ch√¢n, 
                                    theo d√µi nh·ªãp tim khi ch·∫°y b·ªô, v√† nh·∫≠n th√¥ng b√°o t·ª´ iPhone. M√°y v·∫´n ho·∫°t ƒë·ªông ho√†n h·∫£o nh∆∞ ng√†y ƒë·∫ßu.
                                </p>
                            </div>

                            <!-- Product Features -->
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                                    <div class="flex items-center mb-3">
                                        <div class="w-8 h-8 bg-red-100 rounded-full flex items-center justify-center mr-3">
                                            <svg class="w-4 h-4 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                                            </svg>
                                        </div>
                                        <h5 class="font-semibold text-gray-800">Theo d√µi s·ª©c kh·ªèe</h5>
                                    </div>
                                    <p class="text-sm text-gray-600">ƒêo nh·ªãp tim, SpO2, ECG, theo d√µi gi·∫•c ng·ªß, ph√°t hi·ªán t√© ng√£</p>
                                </div>

                                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                                    <div class="flex items-center mb-3">
                                        <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3">
                                            <svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                            </svg>
                                        </div>
                                        <h5 class="font-semibold text-gray-800">Hi·ªáu nƒÉng m·∫°nh m·∫Ω</h5>
                                    </div>
                                    <p class="text-sm text-gray-600">Chip S7 SiP, m√†n h√¨nh Always-On Retina, s·∫°c nhanh</p>
                                </div>

                                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                                    <div class="flex items-center mb-3">
                                        <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3">
                                            <svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                                            </svg>
                                        </div>
                                        <h5 class="font-semibold text-gray-800">M√†n h√¨nh l·ªõn</h5>
                                    </div>
                                    <p class="text-sm text-gray-600">41mm, vi·ªÅn m·ªèng h∆°n 40% so v·ªõi Series 6, ƒë·ªô s√°ng 1000 nits</p>
                                </div>

                                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                                    <div class="flex items-center mb-3">
                                        <div class="w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center mr-3">
                                            <svg class="w-4 h-4 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                            </svg>
                                        </div>
                                        <h5 class="font-semibold text-gray-800">T√¨nh tr·∫°ng 99%</h5>
                                    </div>
                                    <p class="text-sm text-gray-600">Kh√¥ng tr·∫ßy x∆∞·ªõc, ƒë√£ d√°n k√≠nh c∆∞·ªùng l·ª±c t·ª´ ng√†y ƒë·∫ßu</p>
                                </div>
                            </div>

                            <!-- Health Features -->
                            <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                                <h5 class="font-semibold text-green-800 mb-3 flex items-center">
                                    <svg class="w-5 h-5 text-green-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                                    </svg>
                                    T√≠nh nƒÉng s·ª©c kh·ªèe n·ªïi b·∫≠t
                                </h5>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                                    <div class="flex items-center">
                                        <div class="w-2 h-2 bg-green-400 rounded-full mr-2"></div>
                                        <span class="text-green-700">ƒêo nh·ªãp tim li√™n t·ª•c</span>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-2 h-2 bg-green-400 rounded-full mr-2"></div>
                                        <span class="text-green-700">Theo d√µi 20+ b√†i t·∫≠p</span>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-2 h-2 bg-green-400 rounded-full mr-2"></div>
                                        <span class="text-green-700">Ch·ªëng n∆∞·ªõc WR50</span>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-2 h-2 bg-green-400 rounded-full mr-2"></div>
                                        <span class="text-green-700">Ph√¢n t√≠ch gi·∫•c ng·ªß</span>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-2 h-2 bg-green-400 rounded-full mr-2"></div>
                                        <span class="text-green-700">ƒêo n·ªìng ƒë·ªô oxy m√°u</span>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-2 h-2 bg-green-400 rounded-full mr-2"></div>
                                        <span class="text-green-700">Nh·∫Øc nh·ªü r·ª≠a tay</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Included Accessories -->
                            <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                <h5 class="font-semibold text-gray-800 mb-3 flex items-center">
                                    <svg class="w-5 h-5 text-gray-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path>
                                    </svg>
                                    Ph·ª• ki·ªán ƒëi k√®m
                                </h5>
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-3 text-sm">
                                    <div class="flex items-center">
                                        <svg class="w-4 h-4 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                        </svg>
                                        <span class="text-gray-700">H·ªôp g·ªëc</span>
                                    </div>
                                    <div class="flex items-center">
                                        <svg class="w-4 h-4 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                        </svg>
                                        <span class="text-gray-700">C√°p s·∫°c t·ª´ t√≠nh</span>
                                    </div>
                                    <div class="flex items-center">
                                        <svg class="w-4 h-4 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                        </svg>
                                        <span class="text-gray-700">D√¢y ƒëeo Sport</span>
                                    </div>
                                    <div class="flex items-center">
                                        <svg class="w-4 h-4 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                        </svg>
                                        <span class="text-gray-700">K√≠nh c∆∞·ªùng l·ª±c</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Seller's Note -->
                            <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                                <div class="flex items-start">
                                    <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3 mt-1">
                                        <svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                        </svg>
                                    </div>
                                    <div>
                                        <h5 class="font-semibold text-blue-800 mb-2">L∆∞u √Ω t·ª´ ng∆∞·ªùi b√°n</h5>
                                        <p class="text-sm text-blue-700">
                                            "ƒê·ªìng h·ªì c√≤n r·∫•t m·ªõi v√¨ t√¥i ch·ªâ ƒëeo khi t·∫≠p th·ªÉ d·ª•c. H√†ng ng√†y t√¥i v·∫´n ƒëeo ƒë·ªìng h·ªì c∆°. 
                                            Pin v·∫´n d√πng ƒë∆∞·ª£c 1-2 ng√†y t√πy m·ª©c ƒë·ªô s·ª≠ d·ª•ng. Ho√†n h·∫£o cho ng∆∞·ªùi m·ªõi b·∫Øt ƒë·∫ßu d√πng Apple Watch 
                                            ho·∫∑c mu·ªën n√¢ng c·∫•p t·ª´ c√°c phi√™n b·∫£n c≈© h∆°n."
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `
                };

                return stories[product.id] || `
                    <div class="bg-gray-50 p-6 rounded-lg border border-gray-200">
                        <p class="text-gray-700 leading-relaxed">${product.description}</p>
                    </div>
                `;
            };

            // Load product details
            function loadProductDetails() {
                const productId = utils.getUrlParameter('id');

                if (!productId) {
                    showError('Kh√¥ng t√¨m th·∫•y ID s·∫£n ph·∫©m');
                    return;
                }

                // Get products from localStorage
                allProducts = utils.safeLocalStorage.getItem('products') || [];

                // Find the product
                currentProduct = allProducts.find(product => product.id === productId);

                if (!currentProduct) {
                    showError('Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m');
                    return;
                }

                // Display product details
                displayProductDetails();

                // Load related products
                loadRelatedProducts();

                // Hide loading, show content
                hideLoading();
            }

            function displayProductDetails() {
                if (!currentProduct) return;

                // Update page title
                document.title = `${currentProduct.title} - Mine`;

                // Update breadcrumb
                document.getElementById('product-title').textContent = currentProduct.title;

                // Main product image
                const mainImage = document.getElementById('main-product-image');
                if (currentProduct.media && currentProduct.media.length > 0) {
                    mainImage.src = currentProduct.media[0].data;
                    mainImage.alt = currentProduct.title;
                }

                // Product gallery
                const gallery = document.getElementById('product-gallery');
                if (currentProduct.media && currentProduct.media.length > 1) {
                    gallery.innerHTML = currentProduct.media.map((media, index) => `
                        <button class="aspect-w-1 aspect-h-1 w-full overflow-hidden rounded-lg bg-gray-200 hover:opacity-75 transition-opacity" onclick="changeMainImage('${media.data}')">
                            <img src="${media.data}" alt="${currentProduct.title} - ·∫¢nh ${index + 1}" class="h-full w-full object-cover object-center">
                        </button>
                    `).join('');
                } else {
                    gallery.innerHTML = '';
                }

                // Category and condition
                document.getElementById('product-category').textContent = categoryNames[currentProduct.category] || 'Kh√°c';
                document.getElementById('product-condition').textContent = currentProduct.condition;

                // Product title
                document.getElementById('product-title-main').textContent = currentProduct.title;

                // Product ID and date
                document.getElementById('product-id').textContent = `ID: ${currentProduct.id}`;
                document.getElementById('product-date').textContent = utils.formatDate(currentProduct.createdAt);

                // Price
                document.getElementById('product-price').textContent = utils.formatPrice(currentProduct.price);

                // Seller information
                document.getElementById('seller-name').textContent = currentProduct.contactName;
                document.getElementById('seller-phone').textContent = currentProduct.contactPhone;
                document.getElementById('seller-address').textContent = currentProduct.contactAddress;

                // Description - Enhanced with detailed stories
                const enhancedDescription = window.getEnhancedProductStory(currentProduct);
                document.getElementById('product-description').innerHTML = enhancedDescription;

                // Action buttons
                document.getElementById('add-to-cart-btn').addEventListener('click', addToCart);
                document.getElementById('contact-seller-btn').addEventListener('click', contactSeller);
            }

            function loadRelatedProducts() {
                if (!currentProduct) return;

                const relatedProducts = allProducts.filter(product =>
                    product.id !== currentProduct.id &&
                    product.category === currentProduct.category
                ).slice(0, 4);

                const relatedContainer = document.getElementById('related-products');

                if (relatedProducts.length === 0) {
                    relatedContainer.innerHTML = `
                        <div class="col-span-full text-center py-8">
                            <p class="text-gray-500">Kh√¥ng c√≥ s·∫£n ph·∫©m li√™n quan</p>
                        </div>
                    `;
                    return;
                }

                relatedContainer.innerHTML = relatedProducts.map(product => `
                    <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow">
                        <div class="aspect-w-1 aspect-h-1 w-full overflow-hidden bg-gray-200">
                            <img src="${product.media && product.media.length > 0 ? product.media[0].data : ''}" 
                                 alt="${product.title}" 
                                 class="h-full w-full object-cover object-center">
                        </div>
                        <div class="p-4">
                            <h4 class="text-sm font-medium text-gray-900 line-clamp-2 mb-2">${product.title}</h4>
                            <p class="text-lg font-bold text-green-600 mb-2">${utils.formatPrice(product.price)}</p>
                            <div class="flex justify-between items-center">
                                <span class="text-xs text-gray-500">${product.contactName}</span>
                                <a href="trung_bay.html?id=${product.id}" 
                                   class="text-sm text-green-600 hover:text-green-700 font-medium">
                                    Xem chi ti·∫øt
                                </a>
                            </div>
                        </div>
                    </div>
                `).join('');
            }

            // Utility functions
            function showError(message) {
                document.getElementById('loading-state').classList.add('hidden');
                document.getElementById('error-state').classList.remove('hidden');
                document.getElementById('product-content').classList.add('hidden');
            }

            function hideLoading() {
                document.getElementById('loading-state').classList.add('hidden');
                document.getElementById('error-state').classList.add('hidden');
                document.getElementById('product-content').classList.remove('hidden');
            }

            function changeMainImage(src) {
                document.getElementById('main-product-image').src = src;
            }

            function addToCart() {
                if (!currentProduct) return;

                const cart = utils.safeLocalStorage.getItem('cart') || [];
                const existingItem = cart.find(item => item.id === currentProduct.id);

                if (existingItem) {
                    existingItem.quantity += 1;
                } else {
                    cart.push({
                        id: currentProduct.id,
                        title: currentProduct.title,
                        price: currentProduct.price,
                        image: currentProduct.media && currentProduct.media.length > 0 ? currentProduct.media[0].data : '',
                        quantity: 1
                    });
                }

                utils.safeLocalStorage.setItem('cart', cart);

                // Show success message
                alert('ƒê√£ th√™m s·∫£n ph·∫©m v√†o gi·ªè h√†ng!');
            }

            function contactSeller() {
                if (!currentProduct) return;

                const message = `Xin ch√†o ${currentProduct.contactName}, t√¥i quan t√¢m ƒë·∫øn s·∫£n ph·∫©m "${currentProduct.title}" (ID: ${currentProduct.id})`;

                // Try to open WhatsApp or show phone number
                const phone = currentProduct.contactPhone.replace(/\s/g, '');
                const whatsappUrl = `https://wa.me/${phone}?text=${encodeURIComponent(message)}`;

                window.open(whatsappUrl, '_blank');
            }

            // Make functions globally available
            window.changeMainImage = changeMainImage;

            // Enhanced product stories function
            window.getEnhancedProductStory = function (product) {
                const stories = {
                    'SP001': `
                        <div class="space-y-6">
                            <!-- Main Story -->
                            <div class="bg-gradient-to-r from-purple-50 to-indigo-50 p-6 rounded-lg border border-purple-200">
                                <div class="flex items-center mb-4">
                                    <div class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mr-4">
                                        <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
                                        </svg>
                                    </div>
                                    <h4 class="text-xl font-bold text-purple-800">C√¢u chuy·ªán c·ªßa chi·∫øc iPhone 14 Pro Max</h4>
                                </div>
                                <p class="text-gray-700 leading-relaxed mb-4">
                                    ${product.description}
                                </p>
                                <p class="text-gray-700 leading-relaxed">
                                    Chi·∫øc iPhone n√†y ƒë∆∞·ª£c mua t·ª´ Apple Store ch√≠nh h√£ng t·∫°i Vi·ªát Nam v√†o th√°ng 3/2024. T√¥i ƒë√£ ch·ªçn m√†u t√≠m Deep Purple v√¨ n√≥ th·ªÉ hi·ªán s·ª± sang tr·ªçng v√† ƒë·ªôc ƒë√°o. M√°y v·∫´n c√≤n nguy√™n seal, ch∆∞a ƒë∆∞·ª£c k√≠ch ho·∫°t m·ªôt l·∫ßn n√†o, ƒë·∫£m b·∫£o b·∫°n s·∫Ω l√† ng∆∞·ªùi ƒë·∫ßu ti√™n s·ª≠ d·ª•ng.
                                </p>
                            </div>

                            <!-- Product Features -->
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                                    <div class="flex items-center mb-3">
                                        <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3">
                                            <svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                            </svg>
                                        </div>
                                        <h5 class="font-semibold text-gray-800">B·∫£o h√†nh ch√≠nh h√£ng</h5>
                                    </div>
                                    <p class="text-sm text-gray-600">12 th√°ng b·∫£o h√†nh Apple, c√≥ th·ªÉ ki·ªÉm tra b·∫£o h√†nh tr√™n website Apple</p>
                                </div>

                                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                                    <div class="flex items-center mb-3">
                                        <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3">
                                            <svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path>
                                            </svg>
                                        </div>
                                        <h5 class="font-semibold text-gray-800">C√≤n nguy√™n h·ªôp</h5>
                                    </div>
                                    <p class="text-sm text-gray-600">ƒê·∫ßy ƒë·ªß ph·ª• ki·ªán: c√°p s·∫°c, s√°ch h∆∞·ªõng d·∫´n, kim ch·ªçc sim</p>
                                </div>

                                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                                    <div class="flex items-center mb-3">
                                        <div class="w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center mr-3">
                                            <svg class="w-4 h-4 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2m-9 1v16a2 2 0 002 2h8a2 2 0 002-2V5H7z"></path>
                                            </svg>
                                        </div>
                                        <h5 class="font-semibold text-gray-800">M√†u s·∫Øc ƒë·∫∑c bi·ªát</h5>
                                    </div>
                                    <p class="text-sm text-gray-600">Deep Purple - m√†u t√≠m sang tr·ªçng, ch·ªâ c√≥ tr√™n iPhone 14 Pro series</p>
                                </div>

                                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                                    <div class="flex items-center mb-3">
                                        <div class="w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center mr-3">
                                            <svg class="w-4 h-4 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                            </svg>
                                        </div>
                                        <h5 class="font-semibold text-gray-800">Hi·ªáu nƒÉng m·∫°nh m·∫Ω</h5>
                                    </div>
                                    <p class="text-sm text-gray-600">Chip A16 Bionic, camera 48MP Pro, Dynamic Island</p>
                                </div>
                            </div>

                            <!-- Seller's Note -->
                            <div class="bg-amber-50 p-4 rounded-lg border border-amber-200">
                                <div class="flex items-start">
                                    <div class="w-8 h-8 bg-amber-100 rounded-full flex items-center justify-center mr-3 mt-1">
                                        <svg class="w-4 h-4 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                        </svg>
                                    </div>
                                    <div>
                                        <h5 class="font-semibold text-amber-800 mb-2">L·ªùi nh·∫Øn t·ª´ ng∆∞·ªùi b√°n</h5>
                                        <p class="text-sm text-amber-700">
                                            "T√¥i b√°n m√°y n√†y v√¨ ƒë√£ ƒë∆∞·ª£c t·∫∑ng m·ªôt chi·∫øc iPhone 15 Pro Max m·ªõi. M√°y ho√†n to√†n ch∆∞a s·ª≠ d·ª•ng, 
                                            t√¥i cam k·∫øt 100% ch√≠nh h√£ng. C√≥ th·ªÉ h·∫πn g·∫∑p tr·ª±c ti·∫øp ƒë·ªÉ ki·ªÉm tra m√°y tr∆∞·ªõc khi mua."
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `,
                    'SP002': `
                        <div class="space-y-6">
                            <!-- Main Story -->
                            <div class="bg-gradient-to-r from-gray-50 to-blue-50 p-6 rounded-lg border border-gray-200">
                                <div class="flex items-center mb-4">
                                    <div class="w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mr-4">
                                        <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                                        </svg>
                                    </div>
                                    <h4 class="text-xl font-bold text-gray-800">C√¢u chuy·ªán c·ªßa chi·∫øc MacBook Air M2</h4>
                                </div>
                                <p class="text-gray-700 leading-relaxed mb-4">
                                    ${product.description}
                                </p>
                                <p class="text-gray-700 leading-relaxed">
                                    Chi·∫øc MacBook n√†y ƒë∆∞·ª£c mua v√†o th√°ng 7/2023 ƒë·ªÉ ph·ª•c v·ª• cho vi·ªác h·ªçc t·∫≠p t·∫°i ƒë·∫°i h·ªçc. T√¥i ch·ªß y·∫øu s·ª≠ d·ª•ng cho 
                                    vi·ªác code, l√†m b√°o c√°o v√† xem phim. M√°y ƒë∆∞·ª£c b·∫£o qu·∫£n c·∫©n th·∫≠n, lu√¥n ƒë·∫∑t trong t√∫i ch·ªëng s·ªëc khi di chuy·ªÉn.
                                </p>
                            </div>

                            <!-- Product Features -->
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                                    <div class="flex items-center mb-3">
                                        <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3">
                                            <svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                            </svg>
                                        </div>
                                        <h5 class="font-semibold text-gray-800">Hi·ªáu nƒÉng v∆∞·ª£t tr·ªôi</h5>
                                    </div>
                                    <p class="text-sm text-gray-600">Chip M2 8-core CPU, 8-core GPU, x·ª≠ l√Ω m·ªçi t√°c v·ª• m∆∞·ª£t m√†</p>
                                </div>

                                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                                    <div class="flex items-center mb-3">
                                        <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3">
                                            <svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                                            </svg>
                                        </div>
                                        <h5 class="font-semibold text-gray-800">M√†n h√¨nh s·∫Øc n√©t</h5>
                                    </div>
                                    <p class="text-sm text-gray-600">13.6 inch Liquid Retina, ƒë·ªô s√°ng 500 nits, h·ªó tr·ª£ 1 t·ª∑ m√†u</p>
                                </div>

                                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                                    <div class="flex items-center mb-3">
                                        <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3">
                                            <svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                            </svg>
                                        </div>
                                        <h5 class="font-semibold text-gray-800">T√¨nh tr·∫°ng 99%</h5>
                                    </div>
                                    <p class="text-sm text-gray-600">Kh√¥ng tr·∫ßy x∆∞·ªõc, m√†n h√¨nh ho√†n h·∫£o, pin v·∫´n c√≤n 95% dung l∆∞·ª£ng</p>
                                </div>

                                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                                    <div class="flex items-center mb-3">
                                        <div class="w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center mr-3">
                                            <svg class="w-4 h-4 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                                            </svg>
                                        </div>
                                        <h5 class="font-semibold text-gray-800">ƒê·∫ßy ƒë·ªß ph·ª• ki·ªán</h5>
                                    </div>
                                    <p class="text-sm text-gray-600">H·ªôp, s·∫°c MagSafe, c√°p USB-C, s√°ch h∆∞·ªõng d·∫´n</p>
                                </div>
                            </div>

                            <!-- Usage Story -->
                            <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                                <div class="flex items-start">
                                    <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3 mt-1">
                                        <svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                                        </svg>
                                    </div>
                                    <div>
                                        <h5 class="font-semibold text-blue-800 mb-2">Tr·∫£i nghi·ªám s·ª≠ d·ª•ng</h5>
                                        <p class="text-sm text-blue-700 mb-2">
                                            "Trong su·ªët 1 nƒÉm s·ª≠ d·ª•ng, m√¨nh r·∫•t h√†i l√≤ng v·ªõi hi·ªáu nƒÉng c·ªßa m√°y. Code Python, React, ch·∫°y Docker 
                                            ƒë·ªÅu r·∫•t m∆∞·ª£t. Pin c√≥ th·ªÉ d√πng c·∫£ ng√†y m√† kh√¥ng c·∫ßn s·∫°c."
                                        </p>
                                        <p class="text-sm text-blue-700">
                                            "L√Ω do b√°n l√† v√¨ m√¨nh chuy·ªÉn sang l√†m game dev, c·∫ßn m√°y c√≥ GPU m·∫°nh h∆°n. M√°y n√†y ho√†n h·∫£o cho 
                                            sinh vi√™n, developer, v√† ng∆∞·ªùi d√πng vƒÉn ph√≤ng."
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `,
                    'SP005': `
                        <div class="space-y-6">
                            <!-- Main Story -->
                            <div class="bg-gradient-to-r from-red-50 to-orange-50 p-6 rounded-lg border border-red-200">
                                <div class="flex items-center mb-4">
                                    <div class="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mr-4">
                                        <svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                        </svg>
                                    </div>
                                    <h4 class="text-xl font-bold text-red-800">C√¢u chuy·ªán c·ªßa chi·∫øc Honda Wave Alpha</h4>
                                </div>
                                <p class="text-gray-700 leading-relaxed mb-4">
                                    ${product.description}
                                </p>
                                <p class="text-gray-700 leading-relaxed">
                                    Chi·∫øc xe n√†y ƒë√£ ƒë·ªìng h√†nh c√πng t√¥i trong 4 nƒÉm qua, t·ª´ nh·ªØng ng√†y ƒë·∫ßu ƒëi h·ªçc ƒë·∫°i h·ªçc ƒë·∫øn khi ƒëi l√†m. 
                                    Xe ƒë∆∞·ª£c mua m·ªõi t·ª´ ƒë·∫°i l√Ω Honda ch√≠nh h√£ng, lu√¥n ƒë∆∞·ª£c b·∫£o d∆∞·ª°ng ƒë·ªãnh k·ª≥ ƒë√∫ng l·ªãch t·∫°i Honda.
                                </p>
                            </div>

                            <!-- Product Features -->
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                                    <div class="flex items-center mb-3">
                                        <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3">
                                            <svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                            </svg>
                                        </div>
                                        <h5 class="font-semibold text-gray-800">B·∫£o d∆∞·ª°ng ƒë·ªãnh k·ª≥</h5>
                                    </div>
                                    <p class="text-sm text-gray-600">Thay d·∫ßu, l·ªçc gi√≥ ƒë√∫ng l·ªãch, c√≥ ƒë·∫ßy ƒë·ªß h√≥a ƒë∆°n b·∫£o d∆∞·ª°ng</p>
                                </div>

                                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                                    <div class="flex items-center mb-3">
                                        <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3">
                                            <svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                            </svg>
                                        </div>
                                        <h5 class="font-semibold text-gray-800">Ti·∫øt ki·ªám nhi√™n li·ªáu</h5>
                                    </div>
                                    <p class="text-sm text-gray-600">Ch·ªâ ti√™u th·ª• 1.5L/100km, ƒë·ªông c∆° Honda b·ªÅn b·ªâ</p>
                                </div>

                                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                                    <div class="flex items-center mb-3">
                                        <div class="w-8 h-8 bg-red-100 rounded-full flex items-center justify-center mr-3">
                                            <svg class="w-4 h-4 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                                            </svg>
                                        </div>
                                        <h5 class="font-semibold text-gray-800">S·ªë km √≠t</h5>
                                    </div>
                                    <p class="text-sm text-gray-600">Ch·ªâ 15.000km trong 4 nƒÉm, ch·ªß y·∫øu ƒëi trong th√†nh ph·ªë</p>
                                </div>

                                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                                    <div class="flex items-center mb-3">
                                        <div class="w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center mr-3">
                                            <svg class="w-4 h-4 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                                            </svg>
                                        </div>
                                        <h5 class="font-semibold text-gray-800">C√≤n b·∫£o h√†nh</h5>
                                    </div>
                                    <p class="text-sm text-gray-600">B·∫£o h√†nh ƒë·∫øn th√°ng 12/2025, c√≥ th·ªÉ claim t·∫°i Honda</p>
                                </div>
                            </div>

                            <!-- Technical Details -->
                            <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                <h5 class="font-semibold text-gray-800 mb-3 flex items-center">
                                    <svg class="w-5 h-5 text-gray-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                    </svg>
                                    Th√¥ng s·ªë k·ªπ thu·∫≠t
                                </h5>
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
                                    <div>
                                        <span class="font-medium text-gray-700">ƒê·ªông c∆°:</span>
                                        <p class="text-gray-600">110cc, 4 th√¨</p>
                                    </div>
                                    <div>
                                        <span class="font-medium text-gray-700">H·ªôp s·ªë:</span>
                                        <p class="text-gray-600">S·ªë t·ª± ƒë·ªông</p>
                                    </div>
                                    <div>
                                        <span class="font-medium text-gray-700">Kh·ªüi ƒë·ªông:</span>
                                        <p class="text-gray-600">ƒêi·ªán & ƒë·∫°p</p>
                                    </div>
                                    <div>
                                        <span class="font-medium text-gray-700">B√¨nh xƒÉng:</span>
                                        <p class="text-gray-600">3.7 l√≠t</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Seller's Note -->
                            <div class="bg-orange-50 p-4 rounded-lg border border-orange-200">
                                <div class="flex items-start">
                                    <div class="w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center mr-3 mt-1">
                                        <svg class="w-4 h-4 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                        </svg>
                                    </div>
                                    <div>
                                        <h5 class="font-semibold text-orange-800 mb-2">L√Ω do b√°n xe</h5>
                                        <p class="text-sm text-orange-700">
                                            "T√¥i b√°n xe v√¨ s·∫Øp chuy·ªÉn ƒëi l√†m ·ªü n∆∞·ªõc ngo√†i. Xe n√†y r·∫•t ph√π h·ª£p cho sinh vi√™n ho·∫∑c 
                                            ng∆∞·ªùi ƒëi l√†m trong th√†nh ph·ªë. M√°y n·ªï √™m, kh√¥ng hao xƒÉng, b·∫£o d∆∞·ª°ng r·∫ª. 
                                            C√≥ th·ªÉ h·∫πn g·∫∑p ƒë·ªÉ th·ª≠ xe tr∆∞·ªõc khi quy·∫øt ƒë·ªãnh mua."
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `,
                    'SP006': `
                        <div class="space-y-6">
                            <!-- Main Story -->
                            <div class="bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-lg border border-blue-200">
                                <div class="flex items-center mb-4">
                                    <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mr-4">
                                        <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                        </svg>
                                    </div>
                                    <h4 class="text-xl font-bold text-blue-800">C√¢u chuy·ªán c·ªßa chi·∫øc Apple Watch Series 7</h4>
                                </div>
                                <p class="text-gray-700 leading-relaxed mb-4">
                                    ${product.description}
                                </p>
                                <p class="text-gray-700 leading-relaxed">
                                    Chi·∫øc Apple Watch n√†y ƒë∆∞·ª£c mua ƒë·ªÉ theo d√µi s·ª©c kh·ªèe v√† t·∫≠p th·ªÉ d·ª•c. T√¥i ƒë√£ s·ª≠ d·ª•ng n√≥ ƒë·ªÉ ƒë·∫øm b∆∞·ªõc ch√¢n, 
                                    theo d√µi nh·ªãp tim khi ch·∫°y b·ªô, v√† nh·∫≠n th√¥ng b√°o t·ª´ iPhone. M√°y v·∫´n ho·∫°t ƒë·ªông ho√†n h·∫£o nh∆∞ ng√†y ƒë·∫ßu.
                                </p>
                            </div>

                            <!-- Product Features -->
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                                    <div class="flex items-center mb-3">
                                        <div class="w-8 h-8 bg-red-100 rounded-full flex items-center justify-center mr-3">
                                            <svg class="w-4 h-4 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                                            </svg>
                                        </div>
                                        <h5 class="font-semibold text-gray-800">Theo d√µi s·ª©c kh·ªèe</h5>
                                    </div>
                                    <p class="text-sm text-gray-600">ƒêo nh·ªãp tim, SpO2, ECG, theo d√µi gi·∫•c ng·ªß, ph√°t hi·ªán t√© ng√£</p>
                                </div>

                                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                                    <div class="flex items-center mb-3">
                                        <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3">
                                            <svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                            </svg>
                                        </div>
                                        <h5 class="font-semibold text-gray-800">Hi·ªáu nƒÉng m·∫°nh m·∫Ω</h5>
                                    </div>
                                    <p class="text-sm text-gray-600">Chip S7 SiP, m√†n h√¨nh Always-On Retina, s·∫°c nhanh</p>
                                </div>

                                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                                    <div class="flex items-center mb-3">
                                        <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3">
                                            <svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                                            </svg>
                                        </div>
                                        <h5 class="font-semibold text-gray-800">M√†n h√¨nh l·ªõn</h5>
                                    </div>
                                    <p class="text-sm text-gray-600">41mm, vi·ªÅn m·ªèng h∆°n 40% so v·ªõi Series 6, ƒë·ªô s√°ng 1000 nits</p>
                                </div>

                                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                                    <div class="flex items-center mb-3">
                                        <div class="w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center mr-3">
                                            <svg class="w-4 h-4 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                            </svg>
                                        </div>
                                        <h5 class="font-semibold text-gray-800">T√¨nh tr·∫°ng 99%</h5>
                                    </div>
                                    <p class="text-sm text-gray-600">Kh√¥ng tr·∫ßy x∆∞·ªõc, ƒë√£ d√°n k√≠nh c∆∞·ªùng l·ª±c t·ª´ ng√†y ƒë·∫ßu</p>
                                </div>
                            </div>

                            <!-- Health Features -->
                            <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                                <h5 class="font-semibold text-green-800 mb-3 flex items-center">
                                    <svg class="w-5 h-5 text-green-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                                    </svg>
                                    T√≠nh nƒÉng s·ª©c kh·ªèe n·ªïi b·∫≠t
                                </h5>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                                    <div class="flex items-center">
                                        <div class="w-2 h-2 bg-green-400 rounded-full mr-2"></div>
                                        <span class="text-green-700">ƒêo nh·ªãp tim li√™n t·ª•c</span>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-2 h-2 bg-green-400 rounded-full mr-2"></div>
                                        <span class="text-green-700">Theo d√µi 20+ b√†i t·∫≠p</span>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-2 h-2 bg-green-400 rounded-full mr-2"></div>
                                        <span class="text-green-700">Ch·ªëng n∆∞·ªõc WR50</span>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-2 h-2 bg-green-400 rounded-full mr-2"></div>
                                        <span class="text-green-700">Ph√¢n t√≠ch gi·∫•c ng·ªß</span>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-2 h-2 bg-green-400 rounded-full mr-2"></div>
                                        <span class="text-green-700">ƒêo n·ªìng ƒë·ªô oxy m√°u</span>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-2 h-2 bg-green-400 rounded-full mr-2"></div>
                                        <span class="text-green-700">Nh·∫Øc nh·ªü r·ª≠a tay</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Included Accessories -->
                            <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                <h5 class="font-semibold text-gray-800 mb-3 flex items-center">
                                    <svg class="w-5 h-5 text-gray-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path>
                                    </svg>
                                    Ph·ª• ki·ªán ƒëi k√®m
                                </h5>
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-3 text-sm">
                                    <div class="flex items-center">
                                        <svg class="w-4 h-4 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                        </svg>
                                        <span class="text-gray-700">H·ªôp g·ªëc</span>
                                    </div>
                                    <div class="flex items-center">
                                        <svg class="w-4 h-4 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                        </svg>
                                        <span class="text-gray-700">C√°p s·∫°c t·ª´ t√≠nh</span>
                                    </div>
                                    <div class="flex items-center">
                                        <svg class="w-4 h-4 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                        </svg>
                                        <span class="text-gray-700">D√¢y ƒëeo Sport</span>
                                    </div>
                                    <div class="flex items-center">
                                        <svg class="w-4 h-4 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                        </svg>
                                        <span class="text-gray-700">K√≠nh c∆∞·ªùng l·ª±c</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Seller's Note -->
                            <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                                <div class="flex items-start">
                                    <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3 mt-1">
                                        <svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                        </svg>
                                    </div>
                                    <div>
                                        <h5 class="font-semibold text-blue-800 mb-2">L∆∞u √Ω t·ª´ ng∆∞·ªùi b√°n</h5>
                                        <p class="text-sm text-blue-700">
                                            "ƒê·ªìng h·ªì c√≤n r·∫•t m·ªõi v√¨ t√¥i ch·ªâ ƒëeo khi t·∫≠p th·ªÉ d·ª•c. H√†ng ng√†y t√¥i v·∫´n ƒëeo ƒë·ªìng h·ªì c∆°. 
                                            Pin v·∫´n d√πng ƒë∆∞·ª£c 1-2 ng√†y t√πy m·ª©c ƒë·ªô s·ª≠ d·ª•ng. Ho√†n h·∫£o cho ng∆∞·ªùi m·ªõi b·∫Øt ƒë·∫ßu d√πng Apple Watch 
                                            ho·∫∑c mu·ªën n√¢ng c·∫•p t·ª´ c√°c phi√™n b·∫£n c≈© h∆°n."
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `
                };

                return stories[product.id] || `
                    <div class="bg-gray-50 p-6 rounded-lg border border-gray-200">
                        <p class="text-gray-700 leading-relaxed">${product.description}</p>
                    </div>
                `;
            };
            updateCartCount();
        })();
    </script>
</body>

</html>